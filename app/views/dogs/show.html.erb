<div class="container">
  <div class="dog-header">
    <h1><%= @dog.name %></h1>
    <h4><%= @dog.breed %>, <%= @dog.location %></h4>
  </div>
  <div class="dog-details">
    <div class="profile-left">
      <div class="dog-photo">
        <div class="circle-graphic"></div>
         <%= image_tag @dog.photo_url, class: "dog-profile-pic" %>
        <div class="icons">
          <% if @dog.user == current_user %>
            <%= link_to edit_dog_path(@dog) do %>
              <i id="icon" class="fa-solid fa-pen-to-square"></i>
            <% end %>
            <%= link_to dog_path(@dog), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} do %>
              <i id="icon" class="fa-solid fa-trash-can"></i>
            <% end %>
          <% end %>
        </div>
      </div>

      <div class="profile-description">
        <h4>Description</h4>
        <p><%= @dog.description %></p>
        <span class='dog-tags'>Friendly</span>
        <span class='dog-tags'>Deaf</span>
        <span class='dog-tags'>Energetic</span>
        <span class='dog-tags'>Anxious</span>
        <span class='dog-tags'>Potty-trained</span>
        <span class='dog-tags'>Sheds hair</span>
        <h4>Owner</h4>
        <div class="dog-owner">
            <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
          <%= link_to user_path(@dog.user) do %>
            <%= @dog.user.first_name %>
          <% end %>
        </div>
      </div>
    </div>


    <div class="profile-right">
      <div class="booking-form" data-controller="dog-show" data-action="scroll@window->dog-show#scroll" data-search-target="form">
        <h2 class="text-center">Make a booking</h2>
          <div class="booking-form-reviews d-flex justify-content-between border">
            <div class="reviews-left">
              <div class="dog-owner mb-2">
                <%= image_tag "https://kitt.lewagon.com/placeholder/users/ssaunier", class: "avatar dropdown-toggle", id: "navbarDropdown", data: { bs_toggle: "dropdown" }, 'aria-haspopup': true, 'aria-expanded': false %>
                <%= link_to user_path(@dog.user) do %>
                  <%= @dog.user.first_name %>
                <% end %>
              </div>
              <button type="button" class="btn btn-light">
                Contact Owner
              </button>
            </div>
            <div class="reviews-right">
              <p><strong><%= @dog.reviews.count %></strong> Reviews</p>
              <p><strong><%= @dog.reviews.first.rating %></strong> stars</p>
            </div>
          </div>
          <%= simple_form_for [@dog, @booking] do |f| %>
          <%= f.input :start, as: :date, html5: true %>
          <%= f.input :end, as: :date, html5: true %>
          <% if user_signed_in? %>
            <%= f.submit 'Confirm Booking', class: "btn btn-light d-grid gap-2" %>
          <% else %>
              <%= link_to "Confirm Booking", new_user_session_path, class: "btn btn-light" %>
          <% end %>
          <div class="border-top my-2 pt-4 d-flex justify-content-center">
            <h3><strong><%= @dog.rate %></strong> treats/day</h3>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class='recent-reviews'>
        <% @reviews.each do |review| %>
        <div class="review-card">
          <h2><%= review.rating %></h2>
          <p><%= review.content %></p>
        </div>
        <% end %>
      </div>

  <div id="map">
    <h3>Pick-up location is in <%=@dog.location%></h3><br>
    <div style="width: 100%; height: 400px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  </div>
</div>
